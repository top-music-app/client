<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Top Music App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media='screen' href='index.css'>
    <link href="https://fonts.googleapis.com/css?family=Nunito|Oswald:700" rel="stylesheet">
</head>
<body style="background-image: url(https://source.unsplash.com/1600x900/?music,light); background-size: 100%;">
    <div id="backdrop"></div>
    <div id="sidebar">
        <div id='sidebar-title' class="pb-4 border-bottom">
            Top<br>Music<br>App
        </div>
        <div id='sidebar-menu'>
            <div class="row mb-4" id='trackmenu'>
                <div class='col-1'></div>
                <div class="col-9 menutext">Tracks</div>
                <div class="col-2 text-center"><i class="fas fa-music" style="color:red; font-size: 2vw"></i></div>
            </div>
            <div class="row" id='artistmenu'>
                <div class='col-1'></div>
                <div class="col-9 menutext">Artists</div>
                <div class="col-2 text-center"><i class="fas fa-users" style="color:red; font-size: 2vw"></i></div>
            </div>
        </div>
    </div>
    <div class="container-fluid" >
        <div class="row">
            <div class="col-3"></div>
            <div class="col-1"></div>
            <div class="col-8" id='content'>
                <div id='content-row' class="row">
                    <div class="col-3 blog-card spring-fever">
                        <div class="title-content">
                            <h3>SPRING FEVER</h3>
                            <hr />
                            <div class="intro">Yllamco laboris nisi ut aliquip ex ea commodo.</div>
                        </div><!-- /.title-content -->
                        <div class="card-info">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim. 
                        </div><!-- /.card-info -->
                        <div class="utility-info">
                            <ul class="utility-list">
                            <li class="comments">12</li>
                            <li class="date">03.12.2015</li>
                            </ul>
                        </div><!-- /.utility-info -->
                        <!-- overlays -->
                        <div class="gradient-overlay"></div>
                        <div class="color-overlay"></div>
                    </div><!-- /.blog-card -->
                    <div class="col-1"></div>
                    <div class="col-3 blog-card spring-fever">
                        <div class="title-content">
                            <h3>SPRING FEVER</h3>
                            <hr />
                            <div class="intro">Yllamco laboris nisi ut aliquip ex ea commodo.</div>
                        </div><!-- /.title-content -->
                        <div class="card-info">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim. 
                        </div><!-- /.card-info -->
                        <div class="utility-info">
                            <ul class="utility-list">
                            <li class="comments">12</li>
                            <li class="date">03.12.2015</li>
                            </ul>
                        </div><!-- /.utility-info -->
                        <!-- overlays -->
                        <div class="gradient-overlay"></div>
                        <div class="color-overlay"></div>
                    </div><!-- /.blog-card -->
                    <div class="col-1"></div>
                    <div class="col-3 blog-card spring-fever">
                        <div class="title-content">
                            <h3>SPRING FEVER</h3>
                            <hr />
                            <div class="intro">Yllamco laboris nisi ut aliquip ex ea commodo.</div>
                        </div><!-- /.title-content -->
                        <div class="card-info">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim. 
                        </div><!-- /.card-info -->
                        <div class="utility-info">
                            <ul class="utility-list">
                            <li class="comments">12</li>
                            <li class="date">03.12.2015</li>
                            </ul>
                        </div><!-- /.utility-info -->
                        <!-- overlays -->
                        <div class="gradient-overlay"></div>
                        <div class="color-overlay"></div>
                    </div><!-- /.blog-card -->
                    <div class="col-1"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        $('document').ready(() => {
            listFavoriteTracks()
            listFavoriteArtists()
            renderFavoriteArtist()
        })

        function listFavoriteTracks () {
            $.ajax({
                url: 'http://localhost:3000/favorites/tracks',
                headers: {access_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjViYjY0ZWUwZGMwNDlhMTMwMDljZjMwMSIsImlhdCI6MTUzODY3NDQwMH0.nJ7zf_P9MnfK5Rj3BiEpn1sE67NEdhOMlGQ_YyHy6R8'}
            })
            .done(data => {
                if (data.track.indexOf(null) !== -1) {
                    listFavoriteTracks()
                } else {
                    localStorage.setItem('favt', JSON.stringify(data.track))
                }
            })
            .fail(err => {
                console.log(err)
            })
        }

        function listFavoriteArtists () {
            $.ajax({
                url: 'http://localhost:3000/favorites/artists',
                headers: {access_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjViYjY0ZWUwZGMwNDlhMTMwMDljZjMwMSIsImlhdCI6MTUzODY3NDQwMH0.nJ7zf_P9MnfK5Rj3BiEpn1sE67NEdhOMlGQ_YyHy6R8'}
            })
            .done(data => {
                if (data.artist.indexOf(null) !== -1) {
                    listFavoriteArtists()
                } else {
                    localStorage.setItem('fava', JSON.stringify(data.artist))
                }
            })
            .fail(err => {
                console.log(err)
            })
        }

        function renderFavoriteTracks () {
            let tracks = JSON.parse(localStorage.getItem('favt'))
            $('#content-row').text('')
            tracks.forEach(track => {
                $('#content-row').append(
                    `<div class="col-3 blog-card spring-fever">
                        <div class="title-content">
                            <h3>${track_name}</h3>
                            <hr />
                            <div class="intro">Yllamco laboris nisi ut aliquip ex ea commodo.</div>
                        </div><!-- /.title-content -->
                        <div class="card-info">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim. 
                        </div><!-- /.card-info -->
                        <div class="utility-info">
                            <ul class="utility-list">
                            </ul>
                        </div><!-- /.utility-info -->
                        <!-- overlays -->
                        <div class="gradient-overlay"></div>
                        <div class="color-overlay"></div>
                    </div><!-- /.blog-card -->
                    <div class="col-1"></div>`
                )
            })
        }

        function renderFavoriteArtist () {
            let artists = JSON.parse(localStorage.getItem('fava'))
            $('#content-row').text('')
            artists.forEach(artist => {
                $('#content-row').append(
                    `<div class="col-3 blog-card spring-fever">
                        <div class="title-content">
                            <h3>${artist.artist_name}</h3>
                            <hr />
                            <div class="intro">${artist.primary_genres.music_genre_list[0].music_genre.music_genre_name_extended}</div>
                        </div><!-- /.title-content -->
                        <div class="card-info">
                            Rating:<br><br><span>${artist.artist_rating}</span>
                        </div><!-- /.card-info -->
                        <div class="utility-info">
                            <ul class="utility-list">
                            </ul>
                        </div><!-- /.utility-info -->
                        <!-- overlays -->
                        <div class="gradient-overlay"></div>
                        <div class="color-overlay"></div>
                    </div><!-- /.blog-card -->
                    <div class="col-1"></div>`
                )
            })
        }
    </script>

</body>